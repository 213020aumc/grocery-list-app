<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Grocery List App</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />

    <!-- Font Awesome for Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <style>
      body {
        background-color: #f8f9fa;
      }
      .container {
        max-width: 600px;
      }
      .grocery-item {
        background-color: white;
        border-radius: 0.75rem;
      }
    </style>
  </head>
  <body>
    <div class="container my-5">
      <div class="card shadow-sm">
        <div class="card-body p-4">
          <!-- Header -->
          <div class="text-center mb-4">
            <h1 class="h3">
              <i class="fas fa-shopping-cart me-2"></i>Grocery List
            </h1>
            <p class="text-muted">Manage your shopping list with ease</p>
            <p id="total-items-header" class="fw-bold fs-5 mb-0">
              Total items to buy: 0
            </p>
          </div>

          <!-- Add Item Form -->
          <form id="add-item-form" class="mb-4">
            <div class="input-group">
              <input
                type="text"
                id="item-input"
                class="form-control"
                placeholder="Enter grocery item..."
                required
              />
              <button
                class="btn btn-dark mx-2"
                type="submit"
                style="width: 50px"
              >
                <i class="fas fa-plus"></i>
              </button>
            </div>
          </form>

          <!-- List Header -->
          <p id="list-count-header" class="text-muted small">
            0 items in your list
          </p>

          <!-- Grocery List Container -->
          <div id="grocery-list" class="d-grid gap-2">
            <!-- Grocery items will be dynamically inserted here -->
          </div>

          <!-- Tip Footer -->
          <p class="text-center text-muted small mt-4">
            <strong>Tip:</strong> Use the - and + buttons to adjust quantities,
            or the trash button to remove items
          </p>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS Bundle -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
      crossorigin="anonymous"
    ></script>

    <script>
      // --- DOM Element References ---
      const addItemForm = document.getElementById("add-item-form");
      const itemInput = document.getElementById("item-input");
      const groceryList = document.getElementById("grocery-list");
      const totalItemsHeader = document.getElementById("total-items-header");
      const listCountHeader = document.getElementById("list-count-header");

      // --- Application State ---
      // An array of objects to store our grocery items.
      // We initialize it with the data from the image for demonstration.
      let items = [
        { id: 1, name: "Milk bottle", quantity: 2 },
        { id: 2, name: "Bread", quantity: 1 },
        { id: 3, name: "Butter", quantity: 4 },
      ];

      // --- Functions ---

      /**
       * Renders the entire grocery list based on the 'items' array.
       */
      const renderList = () => {
        // Clear the current list
        groceryList.innerHTML = "";

        // If no items, show a message
        if (items.length === 0) {
          groceryList.innerHTML =
            '<p class="text-center text-muted">Your grocery list is empty!</p>';
        } else {
          // Create and append each item
          items.forEach((item) => {
            const listItem = document.createElement("div");
            listItem.className =
              "grocery-item d-flex align-items-center p-3 shadow-sm";
            listItem.dataset.id = item.id; // Store item ID on the element

            listItem.innerHTML = `
                        <button class="btn btn-sm btn-outline-secondary decrease-qty" style="width: 35px;">-</button>
                        
                        <div class="flex-grow-1 mx-3">
                            <strong class="item-name">${item.name}</strong>
                            <div class="text-muted small item-qty">Qty: ${item.quantity}</div>
                        </div>
                        
                        <div class="d-flex gap-2">
                            <button class="btn btn-sm btn-outline-secondary increase-qty" style="width: 35px;">+</button>
                            <button class="btn btn-sm btn-danger remove-item">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
            groceryList.appendChild(listItem);
          });
        }

        // After rendering, update the summary counters
        updateTotals();
      };

      /**
       * Updates the total item count and list count headers.
       */
      const updateTotals = () => {
        const totalItems = items.reduce((sum, item) => sum + item.quantity, 0);
        const uniqueItems = items.length;

        totalItemsHeader.textContent = `Total items to buy: ${totalItems}`;
        listCountHeader.textContent = `${uniqueItems} item${uniqueItems !== 1 ? "s" : ""} in your list`;
      };

      /**
       * Adds a new item to the grocery list.
       */
      const addItem = (itemName) => {
        const newItem = {
          id: Date.now(), // Unique ID using timestamp
          name: itemName,
          quantity: 1,
        };
        items.push(newItem);
        renderList();
      };

      // --- Event Listeners ---

      // Handle form submission to add a new item
      addItemForm.addEventListener("submit", (e) => {
        e.preventDefault(); // Prevent page refresh
        const newItemName = itemInput.value.trim();
        if (newItemName) {
          addItem(newItemName);
          itemInput.value = ""; // Clear input field
          itemInput.focus();
        }
      });

      // Use event delegation for list item actions (increase, decrease, remove)
      groceryList.addEventListener("click", (e) => {
        const target = e.target;
        const itemElement = target.closest(".grocery-item");

        if (!itemElement) return; // Exit if the click was not inside an item

        const itemId = Number(itemElement.dataset.id);
        const item = items.find((i) => i.id === itemId);

        if (target.closest(".increase-qty")) {
          item.quantity++;
        } else if (target.closest(".decrease-qty")) {
          if (item.quantity > 1) {
            item.quantity--;
          }
        } else if (target.closest(".remove-item")) {
          // Remove the item by filtering the array
          items = items.filter((i) => i.id !== itemId);
        }

        // Re-render the list to reflect any changes
        renderList();
      });

      // --- Initial Load ---
      // Render the initial list when the page loads
      renderList();
    </script>
  </body>
</html>
